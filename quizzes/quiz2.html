<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz 2 - Common Cyber Threats</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

  <!-- Top Bar -->
  <div class="w-full bg-gray-200 py-2 px-4">
    <a href="../modules/module2.html" class="inline-flex items-center text-gray-700 hover:text-gray-900 font-medium">
      <svg class="h-4 w-4 mr-2 text-gray-700" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 18a1 1 0 01-.7-.3l-6-6a1 1 0 010-1.4l6-6a1 1 0 011.4 1.4L5.42 10l5.3 5.3A1 1 0 0110 18z" clip-rule="evenodd" />
      </svg>
      Back to Module
    </a>
  </div>

  <!-- Quiz Content -->
  <div class="flex-1 flex items-center justify-center p-6">
    <div id="quiz-box" class="w-full max-w-xl bg-white p-6 rounded shadow-md min-h-[300px]">
      <!-- Questions go here -->
    </div>
  </div>

  <script>
    const quizData = {
      module_title: "Common Cyber Threats",
      questions: [
        {
          question: "What is phishing?",
          options: [
            "A legitimate email from your bank requesting information",
            "A type of computer virus that encrypts files",
            "A fraudulent attempt to obtain sensitive information by disguising as a trustworthy entity",
            "A hardware device used to protect networks"
          ],
          correctAnswer: 2,
          feedback: "Phishing is a fraudulent attempt to obtain sensitive information such as usernames, passwords, and credit card details by disguising as a trustworthy entity in electronic communications."
        },
        {
          question: "Which of the following is a common indicator of a phishing email?",
          options: [
            "It comes from someone in your contact list",
            "It has a sense of urgency or threatens negative consequences",
            "It has the company's correct logo and branding",
            "It addresses you by your full name"
          ],
          correctAnswer: 1,
          feedback: "A sense of urgency or threatening negative consequences is a common tactic in phishing emails to pressure recipients into taking hasty actions without proper verification."
        },
        {
          question: "What is ransomware?",
          options: [
            "Software that displays unwanted advertisements",
            "Malicious software that blocks access to data until a ransom is paid",
            "A tool used by IT departments to recover lost files",
            "A type of firewall that blocks unauthorized access"
          ],
          correctAnswer: 1,
          feedback: "Ransomware is malicious software that encrypts the victim's files, blocking access to them until a ransom is paid to the attacker for the decryption key."
        },
        {
          question: "What is social engineering in the context of cybersecurity?",
          options: [
            "Using social media for marketing purposes",
            "Building social networks within an organization",
            "Psychological manipulation to trick people into revealing confidential information",
            "Engineering software for social media platforms"
          ],
          correctAnswer: 2,
          feedback: "Social engineering is the psychological manipulation of people into performing actions or divulging confidential information. It relies on human error rather than technical hacking techniques."
        },
        {
          question: "Which of the following is the best response to a suspected phishing attempt?",
          options: [
            "Reply to the email asking for verification",
            "Click the link to see if it's legitimate",
            "Delete the email and report it to your IT security team",
            "Forward it to all your colleagues to warn them"
          ],
          correctAnswer: 2,
          feedback: "The best response to a suspected phishing attempt is to delete the email and report it to your IT security team. Never click links, download attachments, or reply to suspicious emails."
        }
      ]
    };

    let currentQuestion = 0;
    let score = 0;
    let attemptsLeft = 3;

    const box = document.getElementById("quiz-box");

    function renderQuestion(index) {
      const q = quizData.questions[index];

      box.innerHTML = `
        <h2 class="text-lg font-bold mb-2">Quiz: ${quizData.module_title}</h2>
        <p class="text-sm text-gray-600 mb-4">Question ${index + 1} of ${quizData.questions.length}</p>
        <p class="mb-4 font-medium">${q.question}</p>
        <div id="options" class="space-y-2 mb-4">
          ${q.options.map((opt, i) => `
            <button class="option-btn w-full border border-gray-300 rounded px-4 py-2 text-left hover:bg-gray-100 text-sm" data-index="${i}">
              ${opt}
            </button>
          `).join('')}
        </div>
        <div id="feedback" class="text-sm mt-2 mb-4 font-semibold"></div>
        <div class="flex justify-between">
          <button id="prevBtn" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 text-sm" ${index === 0 ? 'disabled' : ''}>Previous</button>
          <button id="nextBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm" disabled>Next</button>
        </div>
      `;

      attemptsLeft = 3;
      const optionButtons = document.querySelectorAll(".option-btn");
      const feedbackEl = document.getElementById("feedback");
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");

      optionButtons.forEach(btn => {
        btn.addEventListener("click", (e) => {
          const selected = parseInt(e.target.dataset.index);
          const correct = q.correctAnswer;

          optionButtons.forEach(b => b.classList.remove("bg-red-100", "border-red-400", "bg-green-100", "border-green-400"));

          if (selected === correct) {
            e.target.classList.add("bg-green-100", "border-green-400");
            feedbackEl.textContent = "âœ… Correct!";
            score++;
            nextBtn.disabled = false;
            optionButtons.forEach(b => b.disabled = true);
          } else {
            attemptsLeft--;
            if (attemptsLeft > 0) {
              feedbackEl.textContent = `âŒ Incorrect. You have ${attemptsLeft} attempt${attemptsLeft > 1 ? 's' : ''} left.`;
            } else {
              e.target.classList.add("bg-red-100", "border-red-400");
              feedbackEl.textContent = `âŒ ${q.feedback}`;
              nextBtn.disabled = false;
              optionButtons.forEach(b => b.disabled = true);
            }
          }
        });
      });

      nextBtn.addEventListener("click", () => {
        currentQuestion++;
        if (currentQuestion < quizData.questions.length) {
          renderQuestion(currentQuestion);
        } else {
          renderSummary();
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentQuestion > 0) {
          currentQuestion--;
          renderQuestion(currentQuestion);
        }
      });
    }

    function renderSummary() {
      const percent = Math.round((score / quizData.questions.length) * 100);
      box.innerHTML = `
        <h2 class="text-xl font-bold mb-4">Quiz Completed</h2>
        <p class="text-lg mb-2">âœ… Your Score: <strong>${score} / ${quizData.questions.length}</strong></p>
        <p class="text-lg mb-6">ðŸ“Š Accuracy: <strong>${percent}%</strong></p>
        <a href="../novo-index.html" class="inline-block bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition text-sm">
          Back to Home
        </a>
      `;
    }

    renderQuestion(currentQuestion);
  </script>
</body>
</html>
