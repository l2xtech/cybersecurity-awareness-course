<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz 3 - Password Security</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

  <!-- Top Bar -->
  <div class="w-full bg-gray-200 py-2 px-4">
    <a href="../modules/module3.html" class="inline-flex items-center text-gray-700 hover:text-gray-900 font-medium">
      <svg class="h-4 w-4 mr-2 text-gray-700" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 18a1 1 0 01-.7-.3l-6-6a1 1 0 010-1.4l6-6a1 1 0 011.4 1.4L5.42 10l5.3 5.3A1 1 0 0110 18z" clip-rule="evenodd" />
      </svg>
      Back to Module
    </a>
  </div>

  <!-- Quiz Content -->
  <div class="flex-1 flex items-center justify-center p-6">
    <div id="quiz-box" class="w-full max-w-xl bg-white p-6 rounded shadow-md min-h-[300px]">
      <!-- Questions go here -->
    </div>
  </div>

  <script>
    const quizData = {
      module_title: "Password Security",
      questions: [
        {
          question: "What makes a password strong?",
          options: [
            "Using your name and birthdate",
            "Using the same password for all accounts",
            "Length, complexity, uniqueness, and randomness",
            "Changing one character every 90 days"
          ],
          correctAnswer: 2,
          feedback: "Strong passwords are characterized by their length (at least 12 characters), complexity (mix of uppercase, lowercase, numbers, and symbols), uniqueness (different for each account), and randomness (not based on personal information or patterns)."
        },
        {
          question: "What is multi-factor authentication (MFA)?",
          options: [
            "Using multiple passwords for the same account",
            "Combining something you know with something you have or are",
            "Sharing your password with multiple trusted colleagues",
            "Changing your password multiple times per year"
          ],
          correctAnswer: 1,
          feedback: "Multi-factor authentication combines at least two different factors: something you know (like a password), something you have (like a phone), or something you are (like a fingerprint)."
        },
        {
          question: "Which of the following is the most secure way to manage multiple passwords?",
          options: [
            "Writing them down in a notebook kept at your desk",
            "Using the same password with slight variations",
            "Storing them in an unencrypted spreadsheet",
            "Using a reputable password manager"
          ],
          correctAnswer: 3,
          feedback: "A reputable password manager is the most secure way to manage multiple passwords. It generates, stores, and fills strong, unique passwords for each account while encrypting your password database."
        },
        {
          question: "What should you do if you suspect your password has been compromised?",
          options: [
            "Wait and see if there's any suspicious activity",
            "Change it only on the most important accounts",
            "Immediately change the password and enable MFA if available",
            "Just add one character to make it slightly different"
          ],
          correctAnswer: 2,
          feedback: "If you suspect your password has been compromised, you should immediately change it and enable multi-factor authentication if available. Also consider checking if your accounts were involved in known data breaches."
        },
        {
          question: "Why is password reuse dangerous?",
          options: [
            "It makes passwords easier to remember",
            "If one account is compromised, all accounts using that password are at risk",
            "It only affects non-critical accounts",
            "It's only a problem for personal accounts, not work accounts"
          ],
          correctAnswer: 1,
          feedback: "Password reuse is dangerous because if one account is compromised (through a data breach or other means), attackers can use that same password to access all your other accounts that share that password."
        }
      ]
    };

    let currentQuestion = 0;
    let score = 0;
    let attemptsLeft = 3;

    const box = document.getElementById("quiz-box");

    function renderQuestion(index) {
      const q = quizData.questions[index];

      box.innerHTML = `
        <h2 class="text-lg font-bold mb-2">Quiz: ${quizData.module_title}</h2>
        <p class="text-sm text-gray-600 mb-4">Question ${index + 1} of ${quizData.questions.length}</p>
        <p class="mb-4 font-medium">${q.question}</p>
        <div id="options" class="space-y-2 mb-4">
          ${q.options.map((opt, i) => `
            <button class="option-btn w-full border border-gray-300 rounded px-4 py-2 text-left hover:bg-gray-100 text-sm" data-index="${i}">
              ${opt}
            </button>
          `).join('')}
        </div>
        <div id="feedback" class="text-sm mt-2 mb-4 font-semibold"></div>
        <div class="flex justify-between">
          <button id="prevBtn" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 text-sm" ${index === 0 ? 'disabled' : ''}>Previous</button>
          <button id="nextBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm" disabled>Next</button>
        </div>
      `;

      attemptsLeft = 3;
      const optionButtons = document.querySelectorAll(".option-btn");
      const feedbackEl = document.getElementById("feedback");
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");

      optionButtons.forEach(btn => {
        btn.addEventListener("click", (e) => {
          const selected = parseInt(e.target.dataset.index);
          const correct = q.correctAnswer;

          optionButtons.forEach(b => b.classList.remove("bg-red-100", "border-red-400", "bg-green-100", "border-green-400"));

          if (selected === correct) {
            e.target.classList.add("bg-green-100", "border-green-400");
            feedbackEl.textContent = "âœ… Correct!";
            score++;
            nextBtn.disabled = false;
            optionButtons.forEach(b => b.disabled = true);
          } else {
            attemptsLeft--;
            if (attemptsLeft > 0) {
              feedbackEl.textContent = `âŒ Incorrect. You have ${attemptsLeft} attempt${attemptsLeft > 1 ? 's' : ''} left.`;
            } else {
              e.target.classList.add("bg-red-100", "border-red-400");
              feedbackEl.textContent = `âŒ ${q.feedback}`;
              nextBtn.disabled = false;
              optionButtons.forEach(b => b.disabled = true);
            }
          }
        });
      });

      nextBtn.addEventListener("click", () => {
        currentQuestion++;
        if (currentQuestion < quizData.questions.length) {
          renderQuestion(currentQuestion);
        } else {
          renderSummary();
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentQuestion > 0) {
          currentQuestion--;
          renderQuestion(currentQuestion);
        }
      });
    }

    function renderSummary() {
      const percent = Math.round((score / quizData.questions.length) * 100);
      box.innerHTML = `
        <h2 class="text-xl font-bold mb-4">Quiz Completed</h2>
        <p class="text-lg mb-2">âœ… Your Score: <strong>${score} / ${quizData.questions.length}</strong></p>
        <p class="text-lg mb-6">ðŸ“Š Accuracy: <strong>${percent}%</strong></p>
        <a href="../novo-index.html" class="inline-block bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition text-sm">
          Back to Home
        </a>
      `;
    }

    renderQuestion(currentQuestion);
  </script>
</body>
</html>
