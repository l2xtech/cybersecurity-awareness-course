<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz 4 - Email Security</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

  <!-- Top Bar -->
  <div class="w-full bg-gray-200 py-2 px-4">
    <a href="../modules/module4.html" class="inline-flex items-center text-gray-700 hover:text-gray-900 font-medium">
      <svg class="h-4 w-4 mr-2 text-gray-700" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 18a1 1 0 01-.7-.3l-6-6a1 1 0 010-1.4l6-6a1 1 0 011.4 1.4L5.42 10l5.3 5.3A1 1 0 0110 18z" clip-rule="evenodd" />
      </svg>
      Back to Module
    </a>
  </div>

  <!-- Quiz Content -->
  <div class="flex-1 flex items-center justify-center p-6">
    <div id="quiz-box" class="w-full max-w-xl bg-white p-6 rounded shadow-md min-h-[300px]">
      <!-- Questions go here -->
    </div>
  </div>

  <script>
    const quizData = {
      module_title: "Email Security",
      questions: [
        {
          question: "What is the most common delivery method for malware?",
          options: [
            "Direct installation by hackers",
            "Email attachments and links",
            "USB drives",
            "Software updates"
          ],
          correctAnswer: 1,
          feedback: "Email is the most common delivery method for malware, typically through malicious attachments or links that lead to malware downloads."
        },
        {
          question: "Which of the following is a warning sign of a suspicious email?",
          options: [
            "It comes from someone you regularly communicate with",
            "It addresses you by your correct name",
            "It contains unexpected attachments or links",
            "It discusses a previously established topic"
          ],
          correctAnswer: 2,
          feedback: "Unexpected attachments or links are major warning signs of suspicious emails. Even if an email appears to come from someone you know, be cautious of unexpected attachments or links."
        },
        {
          question: "What should you do before clicking on a link in an email?",
          options: [
            "Click it to see if it works",
            "Forward the email to colleagues to get their opinion",
            "Hover over the link to preview the actual URL destination",
            "Immediately download any attachments to scan them"
          ],
          correctAnswer: 2,
          feedback: "Before clicking on a link, hover over it to preview the actual URL destination. This helps you identify if the link leads to a suspicious or unexpected website."
        },
        {
          question: "What is email spoofing?",
          options: [
            "Sending emails from a fake account",
            "Making an email appear to come from a trusted source when it doesn't",
            "Encrypting email content",
            "Sending too many emails at once"
          ],
          correctAnswer: 1,
          feedback: "Email spoofing is the creation of emails with a forged sender address, making it appear as if the email is coming from a trusted source when it's actually from an attacker."
        },
        {
          question: "What should you do if you've clicked on a suspicious link or attachment?",
          options: [
            "Delete the email and pretend nothing happened",
            "Wait to see if anything bad happens",
            "Immediately disconnect from the network and report the incident to IT security",
            "Forward the email to colleagues to warn them"
          ],
          correctAnswer: 2,
          feedback: "If you've clicked on a suspicious link or attachment, immediately disconnect from the network to prevent potential malware spread and report the incident to your IT security team."
        }
      ]
    };

    let currentQuestion = 0;
    let score = 0;
    let attemptsLeft = 3;

    const box = document.getElementById("quiz-box");

    function renderQuestion(index) {
      const q = quizData.questions[index];

      box.innerHTML = `
        <h2 class="text-lg font-bold mb-2">Quiz: ${quizData.module_title}</h2>
        <p class="text-sm text-gray-600 mb-4">Question ${index + 1} of ${quizData.questions.length}</p>
        <p class="mb-4 font-medium">${q.question}</p>
        <div id="options" class="space-y-2 mb-4">
          ${q.options.map((opt, i) => `
            <button class="option-btn w-full border border-gray-300 rounded px-4 py-2 text-left hover:bg-gray-100 text-sm" data-index="${i}">
              ${opt}
            </button>
          `).join('')}
        </div>
        <div id="feedback" class="text-sm mt-2 mb-4 font-semibold"></div>
        <div class="flex justify-between">
          <button id="prevBtn" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 text-sm" ${index === 0 ? 'disabled' : ''}>Previous</button>
          <button id="nextBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm" disabled>Next</button>
        </div>
      `;

      attemptsLeft = 3;
      const optionButtons = document.querySelectorAll(".option-btn");
      const feedbackEl = document.getElementById("feedback");
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");

      optionButtons.forEach(btn => {
        btn.addEventListener("click", (e) => {
          const selected = parseInt(e.target.dataset.index);
          const correct = q.correctAnswer;

          optionButtons.forEach(b => b.classList.remove("bg-red-100", "border-red-400", "bg-green-100", "border-green-400"));

          if (selected === correct) {
            e.target.classList.add("bg-green-100", "border-green-400");
            feedbackEl.textContent = "âœ… Correct!";
            score++;
            nextBtn.disabled = false;
            optionButtons.forEach(b => b.disabled = true);
          } else {
            attemptsLeft--;
            if (attemptsLeft > 0) {
              feedbackEl.textContent = `âŒ Incorrect. You have ${attemptsLeft} attempt${attemptsLeft > 1 ? 's' : ''} left.`;
            } else {
              e.target.classList.add("bg-red-100", "border-red-400");
              feedbackEl.textContent = `âŒ ${q.feedback}`;
              nextBtn.disabled = false;
              optionButtons.forEach(b => b.disabled = true);
            }
          }
        });
      });

      nextBtn.addEventListener("click", () => {
        currentQuestion++;
        if (currentQuestion < quizData.questions.length) {
          renderQuestion(currentQuestion);
        } else {
          renderSummary();
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentQuestion > 0) {
          currentQuestion--;
          renderQuestion(currentQuestion);
        }
      });
    }

    function renderSummary() {
      const percent = Math.round((score / quizData.questions.length) * 100);
      box.innerHTML = `
        <h2 class="text-xl font-bold mb-4">Quiz Completed</h2>
        <p class="text-lg mb-2">âœ… Your Score: <strong>${score} / ${quizData.questions.length}</strong></p>
        <p class="text-lg mb-6">ðŸ“Š Accuracy: <strong>${percent}%</strong></p>
        <a href="../novo-index.html" class="inline-block bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition text-sm">
          Back to Home
        </a>
      `;
    }

    renderQuestion(currentQuestion);
  </script>
</body>
</html>
