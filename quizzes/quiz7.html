<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz 7 - Data Protection and Privacy</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

  <!-- Top Bar -->
  <div class="w-full bg-gray-200 py-2 px-4">
    <a href="../modules/module7.html" class="inline-flex items-center text-gray-700 hover:text-gray-900 font-medium">
      <svg class="h-4 w-4 mr-2 text-gray-700" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 18a1 1 0 01-.7-.3l-6-6a1 1 0 010-1.4l6-6a1 1 0 011.4 1.4L5.42 10l5.3 5.3A1 1 0 0110 18z" clip-rule="evenodd" />
      </svg>
      Back to Module
    </a>
  </div>

  <!-- Quiz Content -->
  <div class="flex-1 flex items-center justify-center p-6">
    <div id="quiz-box" class="w-full max-w-xl bg-white p-6 rounded shadow-md min-h-[300px]">
      <!-- Quiz Content Injected -->
    </div>
  </div>

  <script>
    const quizData = {
      module_title: "Data Protection and Privacy",
      questions: [
        {
          question: "What is a key principle common to most data protection regulations?",
          options: [
            "Collecting as much data as possible",
            "Storing data indefinitely",
            "Data minimization - only collecting what's necessary",
            "Sharing data freely with third parties"
          ],
          correctAnswer: 2,
          feedback: "Data minimization is a key principle in most data protection regulations, requiring organizations to only collect and retain the minimum amount of data necessary for the specified purpose."
        },
        {
          question: "What is the difference between 'Confidential' and 'Restricted' data classification?",
          options: [
            "There is no difference; the terms are interchangeable",
            "Confidential data is more sensitive than Restricted data",
            "Restricted data has stricter access controls than Confidential data",
            "Restricted data can be shared publicly while Confidential cannot"
          ],
          correctAnswer: 2,
          feedback: "Restricted data typically has stricter access controls than Confidential data. Restricted is usually the highest sensitivity level, requiring the most stringent protection measures, while Confidential is sensitive but with slightly less strict controls."
        },
        {
          question: "What is the 'Right to be Forgotten' in data protection regulations?",
          options: [
            "The right to use anonymous browsing",
            "The right to have your data deleted under certain circumstances",
            "The right to be excluded from marketing emails",
            "The right to use encryption"
          ],
          correctAnswer: 1,
          feedback: "The 'Right to be Forgotten' (or Right to Erasure) is an individual's right to request the deletion of their personal data under certain circumstances, such as when the data is no longer necessary for its original purpose."
        },
        {
          question: "What is 'Privacy by Design'?",
          options: [
            "Designing visually appealing privacy policies",
            "An approach that incorporates privacy into systems and practices from the start",
            "A specific type of encryption algorithm",
            "A privacy certification program for designers"
          ],
          correctAnswer: 1,
          feedback: "Privacy by Design is an approach that incorporates privacy into the design and operation of IT systems, business practices, and products from the start, rather than adding it later as an afterthought."
        },
        {
          question: "What should you do if you suspect a data breach has occurred?",
          options: [
            "Try to fix the problem yourself before telling anyone",
            "Wait to see if anyone else notices",
            "Immediately report it through proper channels",
            "Delete any evidence of the breach to protect the company"
          ],
          correctAnswer: 2,
          feedback: "If you suspect a data breach, you should immediately report it through your organization's proper reporting channels. Quick reporting is essential for effective response and may be required by regulations (e.g., GDPR requires notification within 72 hours)."
        }
      ]
    };

    let currentQuestion = 0;
    let score = 0;
    let attemptsLeft = 3;

    const box = document.getElementById("quiz-box");

    function renderQuestion(index) {
      const q = quizData.questions[index];
      attemptsLeft = 3;

      box.innerHTML = `
        <h2 class="text-lg font-bold mb-2">Quiz: ${quizData.module_title}</h2>
        <p class="text-sm text-gray-600 mb-4">Question ${index + 1} of ${quizData.questions.length}</p>
        <p class="mb-4 font-medium">${q.question}</p>
        <div id="options" class="space-y-2 mb-4">
          ${q.options.map((opt, i) => `
            <button class="option-btn w-full border border-gray-300 rounded px-4 py-2 text-left hover:bg-gray-100 text-sm" data-index="${i}">
              ${opt}
            </button>
          `).join('')}
        </div>
        <div id="feedback" class="text-sm mt-2 mb-4 font-semibold"></div>
        <div class="flex justify-between">
          <button id="prevBtn" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 text-sm" ${index === 0 ? 'disabled' : ''}>Previous</button>
          <button id="nextBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm" disabled>Next</button>
        </div>
      `;

      const optionButtons = document.querySelectorAll(".option-btn");
      const feedbackEl = document.getElementById("feedback");
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");

      optionButtons.forEach(btn => {
        btn.addEventListener("click", (e) => {
          const selected = parseInt(e.target.dataset.index);
          const correct = q.correctAnswer;

          optionButtons.forEach(b => b.classList.remove("bg-green-100", "border-green-400", "bg-red-100", "border-red-400"));

          if (selected === correct) {
            e.target.classList.add("bg-green-100", "border-green-400");
            feedbackEl.textContent = "✅ Correct!";
            score++;
            nextBtn.disabled = false;
            optionButtons.forEach(b => b.disabled = true);
          } else {
            attemptsLeft--;
            if (attemptsLeft > 0) {
              feedbackEl.textContent = `❌ Incorrect. You have ${attemptsLeft} attempt${attemptsLeft > 1 ? 's' : ''} left.`;
            } else {
              e.target.classList.add("bg-red-100", "border-red-400");
              feedbackEl.textContent = `❌ ${q.feedback}`;
              nextBtn.disabled = false;
              optionButtons.forEach(b => b.disabled = true);
            }
          }
        });
      });

      nextBtn.addEventListener("click", () => {
        currentQuestion++;
        if (currentQuestion < quizData.questions.length) {
          renderQuestion(currentQuestion);
        } else {
          renderSummary();
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentQuestion > 0) {
          currentQuestion--;
          renderQuestion(currentQuestion);
        }
      });
    }

    function renderSummary() {
      const percent = Math.round((score / quizData.questions.length) * 100);
      box.innerHTML = `
        <h2 class="text-xl font-bold mb-4">Quiz Completed</h2>
        <p class="text-lg mb-2">✅ Your Score: <strong>${score} / ${quizData.questions.length}</strong></p>
        <p class="text-lg mb-6">📊 Accuracy: <strong>${percent}%</strong></p>
        <a href="../novo-index.html" class="inline-block bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition text-sm">
          Back to Home
        </a>
      `;
    }

    renderQuestion(currentQuestion);
  </script>
</body>
</html>
