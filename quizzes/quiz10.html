<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz 10 - Incident Reporting and Response</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

  <!-- Top Bar -->
  <div class="w-full bg-gray-200 py-2 px-4">
    <a href="../modules/module10.html" class="inline-flex items-center text-gray-700 hover:text-gray-900 font-medium">
      <svg class="h-4 w-4 mr-2 text-gray-700" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 18a1 1 0 01-.7-.3l-6-6a1 1 0 010-1.4l6-6a1 1 0 011.4 1.4L5.42 10l5.3 5.3A1 1 0 0110 18z" clip-rule="evenodd" />
      </svg>
      Back to Module
    </a>
  </div>

  <!-- Quiz Content -->
  <div class="flex-1 flex items-center justify-center p-6">
    <div id="quiz-box" class="w-full max-w-xl bg-white p-6 rounded shadow-md min-h-[300px]">
      <!-- Quiz Content Injected -->
    </div>
  </div>

  <script>
    const quizData = {
      module_title: "Incident Reporting and Response",
      questions: [
        {
          question: "What is a security incident?",
          options: [
            "Any event that potentially compromises the confidentiality, integrity, or availability of information or systems",
            "Only events that result in data loss",
            "Only incidents that involve malware",
            "Only incidents reported by the IT department"
          ],
          correctAnswer: 0,
          feedback: "A security incident is any event that potentially compromises the confidentiality, integrity, or availability of information or systems, regardless of whether it results in actual data loss or damage."
        },
        {
          question: "When should you report a potential security incident?",
          options: [
            "Only after you've confirmed it's definitely a security issue",
            "At the end of the workday",
            "Immediately upon discovery, even if you're not certain",
            "Only if it affects your ability to work"
          ],
          correctAnswer: 2,
          feedback: "You should report potential security incidents immediately upon discovery, even if you're not certain it's a security issue. Early reporting is critical for effective response and can significantly reduce the impact of incidents."
        },
        {
          question: "What should you do if you suspect your computer is infected with malware?",
          options: [
            "Turn off the computer immediately and don't tell anyone",
            "Try to fix it yourself by downloading antivirus software",
            "Disconnect from the network and report it to IT security",
            "Continue working but avoid using sensitive applications"
          ],
          correctAnswer: 2,
          feedback: "If you suspect your computer is infected with malware, you should disconnect from the network to prevent potential spread and immediately report it to your IT security team for proper handling."
        },
        {
          question: "What is the incident response lifecycle?",
          options: [
            "Detect, delete, and forget",
            "Preparation, detection, containment, eradication, recovery, and post-incident analysis",
            "Report, ignore, and continue working",
            "Blame, shame, and retrain"
          ],
          correctAnswer: 1,
          feedback: "The incident response lifecycle includes preparation (establishing procedures before incidents occur), detection and analysis, containment (limiting impact), eradication (removing the cause), recovery (restoring normal operations), and post-incident analysis (learning from the incident)."
        },
        {
          question: "What is your role during a security incident?",
          options: [
            "Take charge and direct the response efforts",
            "Spread the news to warn all colleagues",
            "Report promptly, preserve evidence, document observations, and follow instructions",
            "Determine who is at fault for the incident"
          ],
          correctAnswer: 2,
          feedback: "Your role during a security incident is to report promptly, preserve evidence (avoid actions that might destroy evidence), document your observations with timestamps, and follow instructions from the security team."
        }
      ]
    };

    let currentQuestion = 0;
    let score = 0;
    let attemptsLeft = 3;

    const box = document.getElementById("quiz-box");

    function renderQuestion(index) {
      const q = quizData.questions[index];
      attemptsLeft = 3;

      box.innerHTML = `
        <h2 class="text-lg font-bold mb-2">Quiz: ${quizData.module_title}</h2>
        <p class="text-sm text-gray-600 mb-4">Question ${index + 1} of ${quizData.questions.length}</p>
        <p class="mb-4 font-medium">${q.question}</p>
        <div id="options" class="space-y-2 mb-4">
          ${q.options.map((opt, i) => `
            <button class="option-btn w-full border border-gray-300 rounded px-4 py-2 text-left hover:bg-gray-100 text-sm" data-index="${i}">
              ${opt}
            </button>
          `).join('')}
        </div>
        <div id="feedback" class="text-sm mt-2 mb-4 font-semibold"></div>
        <div class="flex justify-between">
          <button id="prevBtn" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 text-sm" ${index === 0 ? 'disabled' : ''}>Previous</button>
          <button id="nextBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm" disabled>Next</button>
        </div>
      `;

      const optionButtons = document.querySelectorAll(".option-btn");
      const feedbackEl = document.getElementById("feedback");
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");

      optionButtons.forEach(btn => {
        btn.addEventListener("click", (e) => {
          const selected = parseInt(e.target.dataset.index);
          const correct = q.correctAnswer;

          optionButtons.forEach(b => {
            b.classList.remove("bg-green-100", "border-green-400", "bg-red-100", "border-red-400");
          });

          if (selected === correct) {
            e.target.classList.add("bg-green-100", "border-green-400");
            feedbackEl.textContent = "✅ Correct!";
            score++;
            nextBtn.disabled = false;
            optionButtons.forEach(b => b.disabled = true);
          } else {
            attemptsLeft--;
            if (attemptsLeft > 0) {
              feedbackEl.textContent = `❌ Incorrect. You have ${attemptsLeft} attempt${attemptsLeft > 1 ? 's' : ''} left.`;
            } else {
              e.target.classList.add("bg-red-100", "border-red-400");
              feedbackEl.textContent = `❌ ${q.feedback}`;
              nextBtn.disabled = false;
              optionButtons.forEach(b => b.disabled = true);
            }
          }
        });
      });

      nextBtn.addEventListener("click", () => {
        currentQuestion++;
        if (currentQuestion < quizData.questions.length) {
          renderQuestion(currentQuestion);
        } else {
          renderSummary();
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentQuestion > 0) {
          currentQuestion--;
          renderQuestion(currentQuestion);
        }
      });
    }

    function renderSummary() {
      const percent = Math.round((score / quizData.questions.length) * 100);
      box.innerHTML = `
        <h2 class="text-xl font-bold mb-4">Quiz Completed</h2>
        <p class="text-lg mb-2">✅ Your Score: <strong>${score} / ${quizData.questions.length}</strong></p>
        <p class="text-lg mb-6">📊 Accuracy: <strong>${percent}%</strong></p>
        <a href="../novo-index.html" class="inline-block bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition text-sm">
          Back to Home
        </a>
      `;
    }

    renderQuestion(currentQuestion);
  </script>
</body>
</html>
